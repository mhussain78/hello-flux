name: check the integration pipeline
on: [pull_request, push]
jobs:
  check-integration-pipeline:
    runs-on: ubuntu-latest
    steps:
      - name: Echo Running
        run: echo "Hello"

      - name: Call REST API
        run: |
          {
               curl https://api.github.com/repos/mhussain78/fluxcd-installation-test/actions/runs \
              | jq -r '[.workflow_runs[] | select(.display_title == "Kustomization/hello-flux.default")][0]'
          } >> "$GITHUB_OUTPUT"

      - name: Out the JSON
        run: |
          echo "$GITHUB_OUTPUT"
          
          
          

#      - name: Check on failures
#        run: exit 1